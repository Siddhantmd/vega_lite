<!DOCTYPE html>
<head>
  <title>Vega Lite Bar Chart</title>
  <meta charset="utf-8">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/vega/3.0.0-rc2/vega.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-lite/2.0.0-beta.10/vega-lite.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-embed/3.0.0-beta.19/vega-embed.js"></script>

  <style media="screen">
    /* Add space between Vega-Embed links  */
    .vega-actions a {
      margin-right: 5px;
    }
  </style>
</head>

<body>
  <h1>Trying composition in Vega-lite</h1>
  <!-- Container for the visualization -->
  Without concatenation and layering:
  <div id="vis1"></div>
  With only layering:
  <div id="vis2"></div>
  With concatenation and layering:
  <div id="vis3"></div>
  <script>
	  // Assign the specification to a local variable vlSpec.
	  var v1Spec = {
	    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
	    "data": {
	      "values": [
	        {"a": "C", "b": 2}, {"a": "C", "b": 7}, {"a": "C", "b": 4},
	        {"a": "D", "b": 1}, {"a": "D", "b": 2}, {"a": "D", "b": 6},
	        {"a": "E", "b": 8}, {"a": "E", "b": 4}, {"a": "E", "b": 7}
	      ]
	    },
	 	"mark": "bar",
	       "encoding": {
	         "x": {"field": "a", "type": "ordinal"},
	         "y": {"field": "b", "type": "quantitative"}
	       }

	   


	  }
	  vega.embed("#vis1", v1Spec,{"actions":null});
  </script>

<script>
	  // Assign the specification to a local variable vlSpec.
	  var v2Spec = {
	    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
	    "data": {
	      "values": [
	        {"a": "C", "b": 2}, {"a": "C", "b": 7}, {"a": "C", "b": 4},
	        {"a": "D", "b": 1}, {"a": "D", "b": 2}, {"a": "D", "b": 6},
	        {"a": "E", "b": 8}, {"a": "E", "b": 4}, {"a": "E", "b": 7}
	      ]
	    },
	    //trying resolve, isn't working
		"resolve": {
		  CHANNEL: {
		    "scale": "shared",  // Scale resolution
		    "axis": "shared",  // Axis resolution for spatial channels
		    "legend": "shared"  // Legend resolution for non-spatial channels
		  }
		},

	  // "hconcat":[{
	      "layer":[{
	        "mark": "bar",
	        "encoding": {
	          "x": {"field": "a", "type": "ordinal"},
	          "y": {"field": "b", "type": "quantitative"}
	        }
	      },
	      {
	        "mark": "point",
	        "encoding": {
	          "x": {"field": "a", "type": "ordinal"},
	          "y": {"field": "b", "type": "quantitative"}
	        }
	      }
	      ]
	  // }

	  // ,
	  // {
	  //     "layer":[{
	  //       "mark": "bar",
	  //       "encoding": {
	  //         "x": {"field": "a", "type": "ordinal"},
	  //         "y": {"field": "b", "type": "quantitative"}
	  //       }
	  //     },{
	  //       "mark": "point",
	  //       "encoding": {
	  //         "x": {"field": "a", "type": "ordinal"},
	  //         "y": {"field": "b", "type": "quantitative"}
	  //       }

	  //     }] 
	  // }

	  // ]
	  };

	  // Embed the visualization in the container with id `vis`
	  vega.embed("#vis2", v2Spec,{"actions":null});
  </script>

  <script>
	  // Assign the specification to a local variable vlSpec.
	  var v3Spec = {
	    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
	    "data": {
	      "values": [
	        {"a": "C", "b": 2}, {"a": "C", "b": 7}, {"a": "C", "b": 4},
	        {"a": "D", "b": 1}, {"a": "D", "b": 2}, {"a": "D", "b": 6},
	        {"a": "E", "b": 8}, {"a": "E", "b": 4}, {"a": "E", "b": 7}
	      ]
	    },
	    //trying resolve, isn't working
		"resolve": {
		  CHANNEL: {
		    "scale": "shared",  // Scale resolution
		    "axis": "shared",  // Axis resolution for spatial channels
		    "legend": "shared"  // Legend resolution for non-spatial channels
		  }
		},

	  "hconcat":[{
	      "layer":[{
	        "mark": "bar",
	        "encoding": {
	          "x": {"field": "a", "type": "ordinal"},
	          "y": {"field": "b", "type": "quantitative"}
	        }
	      },
	      {
	        "mark": "point",
	        "encoding": {
	          "x": {"field": "a", "type": "ordinal"},
	          "y": {"field": "b", "type": "quantitative"}
	        }
	      }
	      ]
	  }

	  ,
	  {
	      "layer":[{
	        "mark": "bar",
	        "encoding": {
	          "x": {"field": "a", "type": "ordinal"},
	          "y": {"field": "b", "type": "quantitative"}
	        }
	      },{
	        "mark": "point",
	        "encoding": {
	          "x": {"field": "a", "type": "ordinal"},
	          "y": {"field": "b", "type": "quantitative"}
	        }

	      }] 
	  }

	  ]
	  };

	  // Embed the visualization in the container with id `vis`
	  vega.embed("#vis3", v3Spec,{"actions":null});
  </script>


  
</body>
</html>